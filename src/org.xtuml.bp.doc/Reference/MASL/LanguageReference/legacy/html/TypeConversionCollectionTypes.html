<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>4.3. Collection Types</title>
<link rel="stylesheet" type="text/css" href="docbook.css">
<meta name="generator" content="DocBook XSL Stylesheets V1.79.1">
<meta name="keywords" content="MASL, Action Language, Action Semantics, UML, Unified Modelling Language, Shlaer Mellor">
<link rel="home" href="index.html" title="MASL Reference Manual">
<link rel="up" href="TypeConversion.html" title="Chapter 4. Type Conversion">
<link rel="prev" href="TypeConversionBuiltinTypes.html" title="4.2. Built-in Types">
<link rel="next" href="TypeConversionStructureTypes.html" title="4.4. Structure Types">
<link rel="preface" href="preface.html" title="Preface">
<link rel="chapter" href="Grammars.html" title="Chapter 1. Grammars">
<link rel="chapter" href="LexicalStructure.html" title="Chapter 2. Lexical Structure">
<link rel="chapter" href="Types.html" title="Chapter 3. Types">
<link rel="chapter" href="TypeConversion.html" title="Chapter 4. Type Conversion">
<link rel="chapter" href="Domains.html" title="Chapter 5. Domains">
<link rel="chapter" href="Objects.html" title="Chapter 6. Objects">
<link rel="chapter" href="Relationships.html" title="Chapter 7. Relationships">
<link rel="chapter" href="Lifecycles.html" title="Chapter 8. Lifecycles">
<link rel="chapter" href="Functions.html" title="Chapter 9. Functions">
<link rel="chapter" href="Services.html" title="Chapter 10. Services">
<link rel="chapter" href="Exceptions.html" title="Chapter 11. Exceptions">
<link rel="chapter" href="Statements.html" title="Chapter 12. Statements">
<link rel="chapter" href="Names.html" title="Chapter 13. Names">
<link rel="chapter" href="Expressions.html" title="Chapter 14. Expressions">
<link rel="appendix" href="LanguageDefinedCharacteristics.html" title="Appendix A. Language Defined Characteristics">
<link rel="appendix" href="SyntaxSummary.html" title="Appendix B. Syntax Summary">
<link rel="index" href="ix01.html" title="Index">
<link rel="subsection" href="TypeConversionCollectionTypes.html#TypeConversionCollectionTypesofSubtypes" title="4.3.1. Collection Types of Subtypes">
<link rel="subsection" href="TypeConversionCollectionTypes.html#TypeConversionCollectionElementTypes" title="4.3.2. Collection Element Types">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div align="center">OFFICIAL</div>
<div class="navheader">
<table width="100%" summary="Navigation header">
<tr><th colspan="3" align="center">4.3. Collection Types</th></tr>
<tr>
<td width="20%" align="left">
<a accesskey="p" href="TypeConversionBuiltinTypes.html">Prev</a> </td>
<th width="60%" align="center">Chapter 4. Type Conversion</th>
<td width="20%" align="right"> <a accesskey="n" href="TypeConversionStructureTypes.html">Next</a>
</td>
</tr>
</table>
<hr>
</div>
<div class="section">
<div class="titlepage"><div><div><h2 class="title">
<a name="TypeConversionCollectionTypes"></a>4.3. Collection Types</h2></div></div></div>
<div class="toc"><dl class="toc">
<dt><span class="section"><a href="TypeConversionCollectionTypes.html#TypeConversionCollectionTypesofSubtypes">4.3.1. Collection Types of Subtypes</a></span></dt>
<dt><span class="section"><a href="TypeConversionCollectionTypes.html#TypeConversionCollectionElementTypes">4.3.2. Collection Element Types</a></span></dt>
</dl></div>
<p>
Collection types
<a class="indexterm" name="idp63645760"></a>
<a class="indexterm" name="idp63646656"></a>
of a specific type (<span class="type">T</span>) have the type
hierarchy shown in <a class="xref" href="TypeConversionCollectionTypes.html#CollectionTypeHierarchy" title="Figure 4.1. Collection Type Hierarchy">Figure 4.1, “Collection Type Hierarchy”</a>. This means that
there are implicit conversions between values of <span class="type">set</span>,
<a class="indexterm" name="idp63649472"></a>
<span class="type">bag</span>
<a class="indexterm" name="idp63650944"></a>
and <span class="type">sequence</span>
<a class="indexterm" name="idp63652416"></a>
types.
</p>
<div class="figure">
<a name="CollectionTypeHierarchy"></a><div class="figure-title">Figure 4.1. Collection Type Hierarchy</div>
<div class="figure-contents">
<a class="indexterm" name="idp63654528"></a><a class="indexterm" name="idp63655872"></a><div class="mediaobject" align="center"><table border="0" summary="manufactured viewport for HTML img" style="cellpadding: 0; cellspacing: 0;"><tr><td align="center" valign="middle"><img src="images/collectiontypehierarchy.svg" align="middle" alt="Collection Type Hierarchy"></td></tr></table></div>
</div>
</div>
<p><br class="figure-break">
</p>
<p>
The collection type cannot be used as a type, but enables type conversions
between values of two collection types of the same type.
</p>
<p>
Values of a collection type can be converted to a different collection type of
the same element type by using explicit conversion. This type conversion may
raise an exception if the original value cannot be converted to a value of the
new type.
</p>
<p>
Given <code class="varname">a</code> is of type
<a class="link" href="TypesCollectionTypes.html#TypesArrayTypes" title="3.3.4. Array Types"><span class="type">array</span></a>,
<a class="indexterm" name="idp63663680"></a>
<code class="varname">b</code> is of type
<a class="link" href="TypesCollectionTypes.html#TypesBagTypes" title="3.3.2. Bag Types"><span class="type">bag</span></a>,
<a class="indexterm" name="idp63666000"></a>
<code class="varname">s</code> is of type
<a class="link" href="TypesCollectionTypes.html#TypesSetTypes" title="3.3.1. Set Types"><span class="type">set</span></a>,
<a class="indexterm" name="idp63668320"></a>
<code class="varname">q</code> is of type
<a class="link" href="TypesCollectionTypes.html#TypesSequenceTypes" title="3.3.3. Sequence Types"><span class="type">sequence</span></a>,
<a class="indexterm" name="idp63670640"></a>
and <span class="emphasis"><em>x</em></span> and <span class="emphasis"><em>y</em></span> are integer
literals (where <span class="emphasis"><em>x</em></span> &lt; <span class="emphasis"><em>y</em></span>). Then
<a class="xref" href="TypeConversionCollectionTypes.html#ConversionsforaCollectionTypeHierarchy" title="Table 4.1. Conversions for a Collection Type Hierarchy">Table 4.1, “Conversions for a Collection Type Hierarchy”</a> describes for each
possible assignment between variables when an exception will be raised.
</p>
<div class="table">
<a name="ConversionsforaCollectionTypeHierarchy"></a><div class="table-title">Table 4.1. Conversions for a Collection Type Hierarchy</div>
<div class="table-contents"><table class="table" border="1">
<colgroup>
<col align="left" class="Assignment">
<col align="left" class="Description">
</colgroup>
<thead><tr>
<th align="left">Assignment</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr>
<td align="left"><code class="literal">s := set of T(b)</code></td>
<td align="left">
    Raises an exception if there are duplicate elements in the bag.
    </td>
</tr>
<tr>
<td align="left"><code class="literal">s := set of T(q)</code></td>
<td align="left">
    Raises an exception if there are duplicate elements in the sequence.
    </td>
</tr>
<tr>
<td align="left"><code class="literal">s := set of T(a)</code></td>
<td align="left">
    Raises an exception if there are duplicate elements in the array.
    </td>
</tr>
<tr>
<td align="left"><code class="literal">b := bag of T(s)</code></td>
<td align="left">
    Never raises an exception.
    </td>
</tr>
<tr>
<td align="left"><code class="literal">b := bag of T(q)</code></td>
<td align="left">
    Never raises an exception.
    </td>
</tr>
<tr>
<td align="left"><code class="literal">b := bag of T(a)</code></td>
<td align="left">
    Never raises an exception.
    </td>
</tr>
<tr>
<td align="left"><code class="literal">q := sequence of T(s)</code></td>
<td align="left">
    Never raises an exception. The order of the elements in the
    sequence will be arbitrary.
    </td>
</tr>
<tr>
<td align="left"><code class="literal">q := sequence of T(b)</code></td>
<td align="left">
    Never raises an exception. The order of the elements in the
    sequence will be arbitrary.
    </td>
</tr>
<tr>
<td align="left"><code class="literal">q := sequence of T(a)</code></td>
<td align="left">
    Never raises an exception. The order of the elements in the
    sequence will be the same as the array.
    </td>
</tr>
<tr>
<td align="left">
<code class="literal">q := array(</code><span class="emphasis"><em>x</em></span>
    <code class="literal">..</code>
    <span class="emphasis"><em>y</em></span><code class="literal">) of T(s)</code>
</td>
<td align="left">
    Raises an exception if the number of elements in the set is not the same
    as the length of the array. The order of the elements in the array will be
    arbitrary.
    </td>
</tr>
<tr>
<td align="left">
<code class="literal">q := array(</code><span class="emphasis"><em>x</em></span>
    <code class="literal">..</code>
    <span class="emphasis"><em>y</em></span><code class="literal">) of T(b)</code>
</td>
<td align="left">
    Raises an exception if the number of elements in the bag is not the same
    as the length of the array. The order of the elements in the array will be
    arbitrary.
    </td>
</tr>
<tr>
<td align="left">
<code class="literal">q := array(</code><span class="emphasis"><em>x</em></span>
    <code class="literal">..</code>
    <span class="emphasis"><em>y</em></span><code class="literal">) of T(q)</code>
</td>
<td align="left">
    Raises an exception if the number of elements in the sequence is not the
    same as the length of the array. The order of the elements in the array
    will be the same as the sequence.
    </td>
</tr>
</tbody>
</table></div>
</div>
<p><br class="table-break">
</p>
<p>
To convert a <a class="link" href="TypesCollectionTypes.html#TypesBagTypes" title="3.3.2. Bag Types"><span class="type">bag</span></a>,
<a class="indexterm" name="idp63542880"></a>
<a class="link" href="TypesCollectionTypes.html#TypesSequenceTypes" title="3.3.3. Sequence Types"><span class="type">sequence</span></a> or
<a class="indexterm" name="idp63544752"></a>
<a class="link" href="TypesCollectionTypes.html#TypesSetTypes" title="3.3.1. Set Types"><span class="type">set</span></a>
<a class="indexterm" name="idp63546624"></a>
without raising an exception, the operation
<code class="literal">get_unique</code>
<a class="indexterm" name="idp63548128"></a>
 can be used (see<a class="xref" href="LanguageDefinedCharacteristics.html" title="Appendix A. Language Defined Characteristics">Appendix A, <i>Language Defined Characteristics</i></a>).
</p>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="TypeConversionCollectionTypesofSubtypes"></a>4.3.1. Collection Types of Subtypes</h3></div></div></div>
<p>
A collection type of a subtype of another type is a subtype of the collection
type
<a class="indexterm" name="idp63551424"></a>
<a class="indexterm" name="idp63552768"></a>
of the original type.
</p>
<p>
For example, if we declare:
</p>
<div class="example">
<a name="TypeConversionCollectionTypeofaSubtype"></a><div class="example-title">Example 4.3. Collection Type of a Subtype</div>
<div class="example-contents"><pre class="programlisting">

type T is enum (REDM BLUE, GREEN);
subtype S is T;
st:set of T;
ss:set of S;

</pre></div>
</div>
<p><br class="example-break">
</p>
<p>
<a class="xref" href="TypeConversionCollectionTypes.html#TypeConversionsforCollectionTypeHierarchy" title="Table 4.2. Type conversions for Collection Type Hierarchy">Table 4.2, “Type conversions for Collection Type Hierarchy”</a>
<a class="indexterm" name="idp63557920"></a>
<a class="indexterm" name="idp63559264"></a>
describes, for each
possible assignment between variables, which conversions are valid.
</p>
<div class="table">
<a name="TypeConversionsforCollectionTypeHierarchy"></a><div class="table-title">Table 4.2. Type conversions for Collection Type Hierarchy</div>
<div class="table-contents"><table class="table" border="1">
<colgroup>
<col align="left" class="Assignment">
<col align="left" class="Description">
</colgroup>
<thead><tr>
<th align="left">Assignment</th>
<th align="left">Description</th>
</tr></thead>
<tbody>
<tr>
<td align="left"><code class="literal">st := st</code></td>
<td align="left">
    No conversion required.
    </td>
</tr>
<tr>
<td align="left"><code class="literal">st := ss</code></td>
<td align="left">
    Implicit conversion required.
    </td>
</tr>
<tr>
<td align="left"><code class="literal">ss := st</code></td>
<td align="left">
    Implicit conversion that may raise an exception if any of the element
    values cannot be converted into a value of type <code class="varname">T</code>.
    </td>
</tr>
<tr>
<td align="left"><code class="literal">ss := ss</code></td>
<td align="left">
    No conversion required.
    </td>
</tr>
</tbody>
</table></div>
</div>
<p><br class="table-break">
Similarly for <code class="literal">bag</code>, <code class="literal">sequence</code> and
<code class="literal">array</code> types.
</p>
</div>
<div class="section">
<div class="titlepage"><div><div><h3 class="title">
<a name="TypeConversionCollectionElementTypes"></a>4.3.2. Collection Element Types</h3></div></div></div>
<p>
There is a special implicit conversion that can occur between a collection type
and its element type.
</p>
<p>
For example, if we declare:
</p>
<div class="example">
<a name="TypeConversionCollectionElementTypeConversion"></a><div class="example-title">Example 4.4. Collection Element Type Conversion</div>
<div class="example-contents">
<pre class="programlisting">

type T is enum (REDM BLUE, GREEN);
t:T;
s:set of T;

</pre>
<p>
then the following is valid:
</p>
<pre class="programlisting">

s := t;

</pre>
</div>
</div>
<p><br class="example-break">
Similarly, for <a class="link" href="TypesCollectionTypes.html#TypesBagTypes" title="3.3.2. Bag Types"><span class="type">bag</span></a>,
<a class="indexterm" name="idp63581040"></a>
<a class="link" href="TypesCollectionTypes.html#TypesSequenceTypes" title="3.3.3. Sequence Types"><span class="type">sequence</span></a> types
<a class="indexterm" name="idp63582912"></a>
and <a class="link" href="TypesCollectionTypes.html#TypesArrayTypes" title="3.3.4. Array Types"><span class="type">array</span></a> types
<a class="indexterm" name="idp63584784"></a>
whose length is equal to 1.
</p>
</div>
</div>
<div class="navfooter">
<hr>
<table width="100%" summary="Navigation footer">
<tr>
<td width="40%" align="left">
<a accesskey="p" href="TypeConversionBuiltinTypes.html">Prev</a> </td>
<td width="20%" align="center"><a accesskey="u" href="TypeConversion.html">Up</a></td>
<td width="40%" align="right"> <a accesskey="n" href="TypeConversionStructureTypes.html">Next</a>
</td>
</tr>
<tr>
<td width="40%" align="left" valign="top">4.2. Built-in Types </td>
<td width="20%" align="center">
<a accesskey="h" href="index.html">Home</a> | <a accesskey="t" href="bk01-toc.html">ToC</a>
</td>
<td width="40%" align="right" valign="top"> 4.4. Structure Types</td>
</tr>
</table>
</div>
<div align="center">OFFICIAL</div>
</body>
</html>
