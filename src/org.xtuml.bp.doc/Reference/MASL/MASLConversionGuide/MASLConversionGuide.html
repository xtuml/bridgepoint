<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge"><![endif]-->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 1.5.7.1">
<title>MASL Modeling and Conversion Guide</title>
<link rel="stylesheet" href="./../../../asciidoctor-default.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article">
<div id="header">
<h1>MASL Modeling and Conversion Guide</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">1. Introduction</a></li>
<li><a href="#_terminology_and_notation">2. Terminology and Notation</a></li>
<li><a href="#_configuring_the_workspace_for_masl_modeling">3. Configuring the Workspace for MASL Modeling</a>
<ul class="sectlevel2">
<li><a href="#_setting_the_default_action_language">3.1. Setting the Default Action Language</a></li>
<li><a href="#_enable_restricted_identifier_naming">3.2. Enable Restricted Identifier Naming</a></li>
<li><a href="#_allow_concrete_polymorphic_events">3.3. Allow Concrete Polymorphic Events</a></li>
</ul>
</li>
<li><a href="#_the_masl_xtuml_modeling_idiom">4. The MASL-xtUML Modeling Idiom</a>
<ul class="sectlevel2">
<li><a href="#_maintaining_masl_bridging_flexibility_inside_xtuml">4.1. Maintaining MASL Bridging Flexibility Inside xtUML</a></li>
<li><a href="#_packaging_rules_for_masl_compatibility">4.2. Packaging Rules for MASL Compatibility</a></li>
<li><a href="#_managing_types">4.3. Managing Types</a></li>
</ul>
</li>
<li><a href="#_special_masl_constructs_in_xtuml">5. Special MASL constructs in xtUML</a>
<ul class="sectlevel2">
<li><a href="#_deferred_operations">5.1. Deferred Operations</a></li>
<li><a href="#_accessing_service_domains">5.2. Accessing Service Domains</a></li>
<li><a href="#_marking">5.3. Marking</a></li>
</ul>
</li>
<li><a href="#_bridgepoint_extensions_for_masl">6. BridgePoint Extensions for MASL</a>
<ul class="sectlevel2">
<li><a href="#_masl_model_conversion">6.1. MASL Model Conversion</a></li>
<li><a href="#_masl_import_extension">6.2. MASL Import Extension</a></li>
<li><a href="#_masl_export_extension">6.3. MASL Export Extension</a></li>
<li><a href="#_masl_editor_extensions">6.4. MASL Editor Extensions</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_introduction">1. Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>BridgePoint xtUML is designed to support the executable, translatable UML (xtUML) approach
to the Shlaer-Mellor methodology for Model-Driven Architecture (MDA). However, xtUML is not
the only language to have its roots in this MDA approach. MASL  is another dialect that has
evolved from the Shlaer-Mellor methodology and developed a community of users. Now this
common ancestry offers modelers in either community the potential to move models between
the two dialects.</p>
</div>
<div class="paragraph">
<p>BridgePoint xtUML is an editing and execution platform for xtUML
modelers. With the addition of conversion tools, extensions to import/export facilities and
a MASL-aware editor, BridgePoint xtUML is a platform for MASL modelers to advance
their work and employ MASL downstream tools. When moving MASL models into xtUML, an idiom
must be followed. This document details that idiom and the extensions to the platform that
make working with MASL inside BridgePoint xtUML possible.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_terminology_and_notation">2. Terminology and Notation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In this document terms preceded by <em>MASL</em> are as defined in the MASL Reference Manual
unless otherwise clarified below.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 1. Common Terms</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Term</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>eclipse workspace</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A workspace can hold any number of xtUML projects. On disk it is a folder with special eclipse configuration data.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>eclipse project, xtUML project</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A project can hold any number of xtUML model elements. On disk it is a folder with metadata and configuration specific to the project.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>domain component</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An xtUML component representing a MASL Domain</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>domain package</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An xtUML package containing everything associated with a particular MASL Domain, including the domain component for the domain</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>deployment</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Model element used to define the bridge mappings for MASL Projects (Procs)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>shared type</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A type used outside a MASL Domain, including one used within two or more MASL Domains as well as any used on terminator services</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>eclipse view</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A graphical presentation of project information</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>eclipse perspective</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A collection of views that provide a consistent presentation of the project information along with tools to manipulate the model</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>When describing procedures that involve BridgePoint menus or xtUML model element selections,
the following notation is used:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 2. Common User Actions</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Action</th>
<th class="tableblock halign-left valign-top">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;RMB&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Right-Mouse Button</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;click&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Select using left-mouse button</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&lt;dbl-click&gt;</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Two rapid &lt;click&gt;s</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Text-in-bold</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A menu selection</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Text-in-bold &gt; Other-text-in-bold</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A sequence of progressive menu selections</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="_configuring_the_workspace_for_masl_modeling">3. Configuring the Workspace for MASL Modeling</h2>
<div class="sectionbody">
<div class="paragraph">
<p>MASL modeling places restrictions and adds features that are not present in OAL
modeling with BridgePoint xtUML:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Use MASL as the default action language</p>
</li>
<li>
<p>Enable restricted identifier naming for model elements</p>
</li>
<li>
<p>Allow concrete polymorphic events</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The modeler may even wish to simplify the user interface to remove Palette and
Context Menu Entries. <a href="../../UserInterface/PaletteAndContextMenuCustomization/PaletteAndContextMenuCustomization.html">Additional documentation</a>
is available that describes how to perform this customization.</p>
</div>
<div class="paragraph">
<p>The MASL restrictions and features may be configured in the BridgePoint installation
such that every workspace the modeler creates uses these settings.  This is generally
the best approach.  To modify the defaults in the installation, a system administrator
must locate and edit the <code>org.xtuml.bp.pkg_&lt;version&gt;/plugin_customization.ini</code> inside
the installation. Change the settings to the values shown below.</p>
</div>
<div class="paragraph">
<p>If the settings are not applied in the installation, the settings may be applied all
at once to the current workspace by importing the GPS Watch MASL example via
<strong>Help &gt; Welcome &gt; Quick Start &gt; GPS Watch (MASL)</strong>.  A dialog prompts to the user to
enable the settings (Figure 1).</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/masl_config_helper.png" alt="Applying MASL Workspace Settings" width="75%">
</div>
<div class="title">Figure 1. Applying MASL Workspace Settings</div>
</div>
<div class="sect2">
<h3 id="_setting_the_default_action_language">3.1. Setting the Default Action Language</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">For all workspaces via the installation INI file</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>org.xtuml.bp.core/bridgepoint_prefs_default_action_language_dialect=1</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">In the current workspace via the UI</dt>
<dd>
<p>MASL modelers need to set the default action language for the workspace to be
<code>MASL</code> instead of <code>OAL</code> using the Default Action Language preferences (Figure 2).
The preference is located under <strong>Window &gt; Preferences &gt; xtUML</strong>, and after selecting
the button next to desired editor, <strong>&lt;click&gt; OK</strong> to close the window.</p>
</dd>
</dl>
</div>
<div class="imageblock">
<div class="content">
<img src="images/al_pref.png" alt="xtUML Action Language Preferences" width="444">
</div>
<div class="title">Figure 2. Action Language Preferences</div>
</div>
</div>
<div class="sect2">
<h3 id="_enable_restricted_identifier_naming">3.2. Enable Restricted Identifier Naming</h3>
<div class="paragraph">
<p>This preference restricts element names to follow the BNF rule:
<code>( Letter | '_' )( Letter | Digit | '_' )*;</code></p>
</div>
<div class="paragraph">
<p>Identifiers may only contain letters, numbers, and underscores. Spaces,
hyphens, and other characters are not allowed.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">For all workspaces via the installation INI file</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>org.xtuml.bp.core/bridgepoint_prefs_require_masl_style_identifiers=true</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">In the current workspace via the UI</dt>
<dd>
<p>The preference is located under <strong>Window &gt; Preferences &gt; xtUML</strong> (Figure 3).</p>
</dd>
</dl>
</div>
<div class="imageblock">
<div class="content">
<img src="images/restricted_names.png" alt="xtUML Preferences" width="75%">
</div>
<div class="title">Figure 3. xtUML Preferences</div>
</div>
</div>
<div class="sect2">
<h3 id="_allow_concrete_polymorphic_events">3.3. Allow Concrete Polymorphic Events</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">For all workspaces via the installation INI file</dt>
</dl>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>org.xtuml.bp.core/bridgepoint_prefs_allow_concrete_polys=true</code></pre>
</div>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">In the current workspace via the UI</dt>
<dd>
<p>Not configurable via the user interface.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_the_masl_xtuml_modeling_idiom">4. The MASL-xtUML Modeling Idiom</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To ensure that MASL models and their usage of bridging MASL Project deployments are
accurately represented in xtUML, a set of recommendations and restrictions must be followed.
Collectively these form the MASL-xtUML modeling idiom and are the foundation for model
representation and error-free MASL export with BridgePoint xtUML.</p>
</div>
<div class="paragraph">
<p>Since MASL and xtUML are based on the Shlaer-­Mellor Method, the two languages are similar
at the core. Consequently, most mappings between constructs in the two languages are
straight­forward (e.g., MASL Object maps to xtUML Class) and are therefore not detailed
here. However, each language has been extended differently, leading to some mappings that
are less obvious. These differences are explained in the sections below.</p>
</div>
<div class="paragraph">
<p>The idiom addresses three areas of concern:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Bridging between domains</p>
</li>
<li>
<p>Model packaging to maintain visibility</p>
</li>
<li>
<p>Type mapping</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>By following the practices outlined in the MASL-xtUML modeling idiom, models that
start as MASL can be converted to xtUML, modified inside the xtUML Editor and
exported back to textual MASL for processing by downstream tools.</p>
</div>
<div class="sect2">
<h3 id="_maintaining_masl_bridging_flexibility_inside_xtuml">4.1. Maintaining MASL Bridging Flexibility Inside xtUML</h3>
<div class="paragraph">
<p>Systems are typically constructed by connecting multiple MASL Domains (xtUML components)
using some form of bridging technology. Where MASL employs terminators and public domain services,
xtUML uses interfaces consisting of interface operations and ports.</p>
</div>
<div class="sect3">
<h4 id="_using_deployments_to_connect_domains">4.1.1. Using Deployments to Connect Domains</h4>
<div class="paragraph">
<p>In xtUML, a special model element named "Deployment" is used to define inter-domain
bridging in a manner that is familiar to modelers with experience creating MASL Procs (Projects)
in other methodologies. <a href="../../UserInterface/xtUMLModeling/ModelElements/Deployments/Deployments.html">Deployments
are described in detail in the reference documentation</a>.</p>
</div>
<div class="paragraph">
<p>MASL-style bridging using Deployments provides flexibility in the way domains (components)
can communicate. For example, a domain may use a subset of the services surfaced by
another domain, and it may choose to refer to those services using names that are
different than the domain providing them. Additionally, a forking bridge allows a domain to
view as a single service two or more services provided by any number of MASL Domains.</p>
</div>
</div>
<div class="sect3">
<h4 id="_domain_services">4.1.2. Domain Services</h4>
<div class="paragraph">
<p>Each component representing a MASL Domain sprouts a single provided interface containing an
interface operation for each public service surfaced by the MASL Domain as declared in the
MASL Domain interface file. This provided interface covers all incoming interface
operations for the domain component.</p>
</div>
<div class="paragraph">
<p>MASL Domain services are modeled in BridgePoint as a function inside
a component and a matching operation in a provided interface on the component boundary. See
<code>clear()</code> and <code>key()</code> of the calc domain in Figure 4. By convention, the port name and this
provided interface are renamed by the modeler to match the component (MASL Domain) name.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/function_terminator.png" alt="MASL Functions and Terminators" width="75%">
</div>
<div class="title">Figure 4. MASL Domain and Terminator Services in xtUML</div>
</div>
<div class="paragraph">
<p>The <code>Publish to interface&#8230;&#8203;</code> tool is available on the context menu of functions shown in
Model Explorer.  This tool helps the user keep the interface operations in synch with
changes made to the signatures of the domain services.  The tool is described in more
detail in <a href="../../UserInterface/BridgePointContextMenuTools/BridgePointContextMenuTools.html">BridgePoint Context Menu Tools</a>.</p>
</div>
<div class="paragraph">
<p>If there is a domain service without a matching provided operation, it represents a private
domain service in MASL. Thus, the existence of a matching operation in the provided
interface provides access to the corresponding domain service and therefore makes it
public. Without a matching operation in the provided interface, a domain service is private
to the domain.</p>
</div>
</div>
<div class="sect3">
<h4 id="_terminator_services">4.1.3. Terminator Services</h4>
<div class="paragraph">
<p>MASL terminators and terminator services define the outbound messages a domain
calls to access functionality provided by other domains.  They are modeled in BridgePoint
as a required interface implementing interface operations on the component boundary.
See the "disp" terminator and the <code>error()</code> and <code>result()</code> terminator services in Figure 2.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The dialect property of the domain services and terminator services are important.
For a MASL Domain, all provided operations should have dialect "None" and required
operations (i.e. terminator services) should have dialect "MASL". The xtUML function inside
the component that implements the domain service has dialect "MASL".
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_packaging_rules_for_masl_compatibility">4.2. Packaging Rules for MASL Compatibility</h3>
<div class="sect3">
<h4 id="_packaging_overview">4.2.1. Packaging Overview</h4>
<div class="paragraph">
<p>Under xtUML, model elements defined within one component have no knowledge or visibility of
model elements (including types) defined within another component. This is different from
MASL where public types defined within a MASL Domain can be accessed by other MASL Domains
using a qualified name of the form <code>otherDomainName::someType</code>. The xtUML visibility
rules also affect interface messages (domain and terminator services).</p>
</div>
<div class="paragraph">
<p>The MASL-to-xtUML conversion process packages a MASL Domain as a xtUML component.
Thus, the types defined within that MASL Domain become invisible to other components
of the system.  To deal with these differences in scoping, packaging rules in the
organization of the model are needed to maintain system-wide visibility.</p>
</div>
</div>
<div class="sect3">
<h4 id="_packaging_requirements">4.2.2. Packaging Requirements</h4>
<div class="paragraph">
<p>All interface declarations and shared types, including types used on terminator services,
must be packaged outside the component (MASL Domain)  definitions.</p>
</div>
<div class="imageblock right">
<div class="content">
<img src="images/domain_setup.png" alt="MASL Project Layout" width="254">
</div>
<div class="title">Figure 5. Shared Types and Interfaces</div>
</div>
<div class="paragraph">
<p>Each MASL Domain implemented as an xtUML model contains a top-level package.  This
package typically has the same name as the domain component inside. This
package contains:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>a single component definition representing the MASL Domain</p>
</li>
<li>
<p>shared types and interface definitions associated with the MASL Domain in a package named "Shared"</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Another top-level package may also be included that contains structural types and
type references.  By convention, this package is named "types".</p>
</div>
<div class="paragraph">
<p>To support system-side visibility, BridgePoint’s support for inter-project references
(IPRs) is leveraged. The xtUML project in a workspace that contains a Deployment will
enable IPRs and thus will gain access to the components, interfaces, and types shared
by the domain projects in the workspace. IPRs should remain off for domain projects.</p>
</div>
<div class="paragraph">
<p>A typical xtUML project using this approach is illustrated in Figure 5. Note that all
shared types defined in the domain are contained within the <code>Shared</code> package associated
with that domain and not inside the component representing the MASL Domain.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>With BridgePoint xtUML, the conversion facility produces a single xtUML model file
adhering to the packaging and naming scheme illustrated. Modelers are free to repackage
and rename their models as they see fit, so long as these two conditions are met:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>All elements shared among components are defined outside the components that refer to them</p>
</li>
<li>
<p>All elements associated with a MASL Domain reside within the domain package for that
MASL Domain (i.e. are underneath the package that contains the domain component)</p>
</li>
</ol>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_managing_types">4.3. Managing Types</h3>
<div class="paragraph">
<p>Types that a domain intends to make public to the outside world are created in the
<code>Shared</code> package that is a sibling to the component (domain).</p>
</div>
<div class="paragraph">
<p>Types that a domain intends to keep private from the outside world should be created in a
package underneath the component.</p>
</div>
<div class="paragraph">
<p>When this idiom for packaging is used, the MASL export facility produces a MASL Domain
interface file (<code>&lt;domain&gt;.int</code>) that includes the shared types, domain services, and
terminators of the domain.</p>
</div>
<div class="sect3">
<h4 id="_xtuml_and_masl_type_mapping">4.3.1. xtUML and MASL Type Mapping</h4>
<div class="paragraph">
<p>The MASL type system does not align perfectly with that of xtUML. In some cases MASL
modelers will use core xtUML types.  In other cases, the user will create a new
User Defined Type (UDT) that represents a MASL core type. The recommended practice is
to put these created MASL types in the top-level <code>types</code> package of the model.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
MASL types created by the user generally have their core type set to be the UDT
named <code>MASLtype</code>, which exists or is created by the modeler in a top level package
named <code>types</code>. The core type of <code>MASLtype</code> must be <code>string</code>. The core type of a UDT is
manipulated in the Properties view (Figure 5) or via <strong>&lt;RMB&gt; &gt; Set Type&#8230;&#8203;</strong>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Modelers are encouraged to use xtUML native types when possible. However, for some
MASL native types, collection types, constrained types, and type references the modeler
will create custom types in the xtUML model.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. Recommended Type Mapping</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">MASL type</th>
<th class="tableblock halign-left valign-top">xtUML type recommendation</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>boolean</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use native <code>boolean</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>byte</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create UDT with core type <code>integer</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>character</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create UDT with core type <code>integer</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>date</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use native <code>date</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>device</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create UDT with core type <code>MASLtype</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>duration</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create UDT with core type <code>integer</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>event</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create UDT with core type <code>inst&lt;Event&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>integer</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use native <code>integer</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>long_integer</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create UDT with core type <code>integer</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>real</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use native <code>real</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>string</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use native <code>string</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>timer</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create a UDT with core type <code>inst_ref&lt;Timer&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>timestamp</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create UDT with core type <code>MASLtype</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>void</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Use native <code>void</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>wcharacter</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create UDT with core type <code>integer</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>wstring</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Create UDT with core type <code>string</code></p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_structures_and_enumerations">Structures and Enumerations</h5>
<div class="paragraph">
<p>Structured and enumeration data types in the MASL-xtUML modeling idiom are special.
These MASL types are defined in a textual form and do not use the "Structured Data Type"
or "Enumeration Data Type" elements that are built into BridgePoint xtUML.</p>
</div>
<div class="paragraph">
<p>To create a structured or enumeration data type in MASL:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create a new User Data Type in the desired package and name it appropriately</p>
</li>
<li>
<p>Set the Core Type property of the new UDT to <code>MASLtype</code></p>
</li>
<li>
<p>&lt;dbl-click&gt; on the new type or use the <code>&#8230;&#8203;</code> button in the Properties view to open the
Data Type Definition editor</p>
</li>
<li>
<p>Write MASL to define the type. Examples are shown in Figure 6 and 7.</p>
</li>
</ol>
</div>
<div class="imageblock">
<div class="content">
<img src="images/masl_structure.png" alt="MASL Structured Data Type" width="75%">
</div>
<div class="title">Figure 6. MASL Structured Data Type</div>
</div>
<div class="imageblock">
<div class="content">
<img src="images/masl_enum.png" alt="MASL Enumeration Data Type" width="75%">
</div>
<div class="title">Figure 7. MASL Enumeration Data Type</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_type_references">4.3.2. Type References</h4>
<div class="paragraph">
<p>In xtUML typing is established through a link between the model element being typed and a
particular instance of a type. However, MASL treats a type reference as a first ­class
concept which makes typing a model element in MASL slightly more complex than it is with
xtUML. This is because a type reference in MASL can further constrain the type that is
applied to the affected model element. Type references may be used to type structural
model elements or variable declarations inside MASL activities.</p>
</div>
<div class="paragraph">
<p>Type references must be used to add constraints to types, use collection types, or instance
types. To use these types, create a new public User Data Type type and enter the full
type reference as the type name. Then use the Properties view (Figure 8) or <strong>&lt;RMB&gt; &gt; Set Type&#8230;&#8203;</strong>
to set the core type of the new UDT to <code>MASLtype</code>.</p>
</div>
<div class="paragraph">
<p>For example, the modeler can create a new UDT and name it <code>sequence of integer</code>.  Model
elements, such as parameters or class attributes, may be set to this new type and used
in MASL action language inside the model.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/typerefs.png" alt="Configuring Type References in Properties" width="75%">
</div>
<div class="title">Figure 8. Configuring Type References in Properties</div>
</div>
<div class="paragraph">
<p>Type references may be placed either in the top level <code>types</code> package of the project
or in the <code>Shared</code> package next to the domain.  It is left to the modeler&#8217;s judgement
to determine if it makes better sense to place the type reference close to
the domain or at the system-level.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
MASL allows modelers to constrain sequence types with a max size. Only integer
literals are allowed to be used to constrain sequences when the type is used to type an
activity parameter or a return type. If the type is used to type a local variable, an
attribute, or a structure member, any constant expression of type integer may be used in
a sequence constraint.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_using_shared_types">4.3.3. Using Shared Types</h4>
<div class="paragraph">
<p>To access shared types from other domains in MASL action language, the modeler must create
a dependency to the <code>&lt;other domain&gt;.int</code> file into the local project&#8217;s
<a href="../../UserInterface/xtUMLModeling/Preferences/ProjDependencies.html">Dependencies project preferences</a>.</p>
</div>
<div class="imageblock right">
<div class="content">
<img src="images/gps_typerefs.png" alt="Type References in GPS_Watch" width="226">
</div>
<div class="title">Figure 9. Shared Types in a Deployment</div>
</div>
<div class="paragraph">
<p>To access shared types from other domains in the structural part of the model, the modeler
must create a type reference in the local xtUML project.  This action is completed by
creating a new UDT in the current project with a special name that references the
domain where the type actually lives (e.g. <code>OtherDom::someType</code>).  It is recommended
that these type reference UDTs be created inside the <code>Shared</code> package that is a sibling
to the component or deployment that uses the type reference.</p>
</div>
<div class="paragraph">
<p>The MASL version GPS Watch example application shows shared types (via type references)
in action inside the <code>GPS_Watch</code> project. Each shared type, such as <code>Tracking::GoalCriteria</code>,
is a user data type whose core type is set to <code>MASLtype</code>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_special_masl_constructs_in_xtuml">5. Special MASL constructs in xtUML</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_deferred_operations">5.1. Deferred Operations</h3>
<div class="paragraph">
<p>To create a deferred operation, create an operation with an identical signature in each
subtype class.  Then use the Properties view to set the dialect of the supertype class'
operation to "None".  Each subtype class' operation dialect is set to "MASL".</p>
</div>
</div>
<div class="sect2">
<h3 id="_accessing_service_domains">5.2. Accessing Service Domains</h3>
<div class="paragraph">
<p>To access shared implementations from service domains the modeler must create a dependency
to the <code>&lt;other domain&gt;.int</code> file or a folder containing one or more <code>&lt;other domain&gt;.int</code>
files in the local project&#8217;s <a href="../../UserInterface/xtUMLModeling/Preferences/ProjDependencies.html">Dependencies project preferences</a>.</p>
</div>
<div class="paragraph">
<p>When a folder dependency is specified, all MASL <code>*.int</code> files directly under the folder are
parsed as part of the local project&#8217;s validation process.</p>
</div>
</div>
<div class="sect2">
<h3 id="_marking">5.3. Marking</h3>
<div class="paragraph">
<p>Application marks are used to control and customize the model translation
process.  They allow the modeler to provide values for pre-defined features
of the model compiler.</p>
</div>
<div class="paragraph">
<p>The MASL model compiler takes this input in the form of <code>pragma</code> statements
associated with application model element.  The marks created using this marking
editor are output as `pragma`s when the modeler exports MASL.</p>
</div>
<div class="paragraph">
<p><a href="../../UserInterface/MarkingEditor/MarkingEditor.html">Additional documentation</a>
describes the process of marking a MASL model in full detail.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_bridgepoint_extensions_for_masl">6. BridgePoint Extensions for MASL</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The MASL extensions added to BridgePoint include:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>MASL-xtuml conversion tools</p>
</li>
<li>
<p>Enhanced BridgePoint Import/Export facilities</p>
</li>
<li>
<p>MASL-aware Editor</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Each of these enhanced facilities are described in the sections below.</p>
</div>
<div class="sect2">
<h3 id="_masl_model_conversion">6.1. MASL Model Conversion</h3>
<div class="paragraph">
<p>The conversion of MASL Domains into MASL-infused xtUML models is
performed by the tool <code>masl2xtuml</code> and is invoked from the command line. The conversion
command <code>masl2xtuml</code>  has the following syntax for MASL Domains:</p>
</div>
<div class="paragraph">
<p><code>masl2xtuml -d &lt;directory path&gt; -o &lt;directory path&gt;</code></p>
</div>
<div class="paragraph">
<p>where <code>&lt;directory path&gt;</code> is any relative or absolute directory path, <code>-d</code> identifies
the MASL Domain and <code>-o</code> identifies the destination directory where the xtUML model
file is written to. A complete <a href="../masl2xtuml/masl2xtuml.html">reference is included in the MASL documentation</a>.</p>
</div>
<div class="paragraph">
<p>The MASL Domains are processed one at a time in any order. All conversion
can be performed sequentially or each conversion can be followed by a BridgePoint model
import.</p>
</div>
<div class="paragraph">
<p>Note that MASL Domain models can be converted and imported into the workspace in any
order.</p>
</div>
</div>
<div class="sect2">
<h3 id="_masl_import_extension">6.2. MASL Import Extension</h3>
<div class="paragraph">
<p>The xtUML Import wizard is extended to handle MASL models that have been converted to
xtUML.</p>
</div>
<div class="paragraph">
<p>As described earlier, the MASL-xtUML idiom organizes the BridgePoint workspace based on
projects, and an xtUML project is needed for each MASL Domain and MASL Project.</p>
</div>
<div class="paragraph">
<p>It is important to recall that the MASL-xtUML idiom requires system-wide scope for some
model elements and this is facilitated in BridgePoint using Inter-Project References.
This feature is only used for xtUML projects that hold deployments. xtUML projects
that contain MASL Domains do not use IPRs.</p>
</div>
<div class="sect3">
<h4 id="_bridgepoint_model_import_from_the_xtuml_modeling_perspective">6.2.1. BridgePoint Model Import from the xtUML Modeling Perspective</h4>
<div class="paragraph">
<p>To perform each import from inside BridgePoint, the xtUML Modeling perspective is used following these
steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Create an xtUML project using <strong>File &gt; New &gt; xtUML Project</strong>. This command will ask for
a name which must be unique among all projects in the workspace. A descriptive name that
includes a connection to the original MASL Domain is suggested. Choose "MASL Exporter"
on the model compiler selection page.</p>
</li>
<li>
<p>Select <strong>File &gt; Import</strong> to start a model import. This will open the Import wizard.</p>
</li>
<li>
<p>Expand the xtUML folder and select xtUML Model from the list of import sources.</p>
</li>
<li>
<p>After <strong>&lt;click&gt;</strong> ing on Next, enter the full path to the MASL-infused xtUML model file
to be imported. Pressing the Browse button will open a file browser where <strong>&lt;click&gt;</strong> s are
used to navigate through the folder list down to the file to be imported.</p>
</li>
<li>
<p>Once the path is entered, <strong>&lt;click&gt;</strong> Finish to initiate the import.</p>
</li>
<li>
<p>Upon completion, the Model Explorer view will be updated to show the newly imported
model.</p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_masl_export_extension">6.3. MASL Export Extension</h3>
<div class="paragraph">
<p>The conversion of xtUML models to MASL is a single step operation that is invoked from
either the xtUML Modeling perspective or a command line. The MASL Export extension consists
of the <code>xtuml2masl</code> conversion tool and enhancements to the BridgePoint "Build Project"
facility to support the translation of the model into MASL.</p>
</div>
<div class="sect3">
<h4 id="_masl_export_from_the_xtuml_modeling_perspective">6.3.1. MASL Export from the xtUML Modeling Perspective</h4>
<div class="paragraph">
<p>The configuration to export an xtUML model to MASL from BridgePoint typically occurs
during project creation.  When a new xtUML Project is created a wizard guides the user through the
model creation process.  After giving the project a name, the user must select "MASL Exporter"
as the model compiler to use.</p>
</div>
<div class="paragraph">
<p>At any point during the modeling process the user may select <strong>Project &gt; Build Project</strong>.
This action will cause the model to be translated from xtUML to MASL.  The output is
placed in a folder underneath the project on disk.  The default name of the folder is
<code>masl/</code>, but it may be configured in the MASL Exporter properties (Figure 10).  To
access these properties, select the project in Model Explorer, then use the menu
<strong>Project &gt; Properties</strong>.  Open the "Navigator"
view or switch to the "C/C++" perspective to use a file browser inside the tool.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/masl_exporter_properties.png" alt="MASL Exporter Properties" width="500">
</div>
<div class="title">Figure 10. MASL Exporter Properties</div>
</div>
<div class="paragraph">
<p>If a xtUML project already exists that is not configured to use this MASL Exporter,
a tool is available to convert the project to use it.  To access this tool, select
the xtUML project in Model Explorer, then <strong>&lt;RMB&gt; &gt; BridgePoint Utilities &gt; Set Model
Compiler</strong> and choose MASL Exporter from the list.</p>
</div>
</div>
<div class="sect3">
<h4 id="_masl_export_from_the_command_line">6.3.2. MASL Export from the Command line</h4>
<div class="paragraph">
<p>To export xtUML models to MASL equivalent models without invoking the BridgePoint UI, the
<code>xtuml2masl</code> tool is used. This tool makes use of the environment variable <code>WORKSPACE</code>
which must be set to the directory path of the xtUML workspace holding the source xtUML
project. It is recommended that all xtUML projects be contained in a single workspace,
however this is not enforced by the export tool. If the complete xtUML model is contained
across multiple BridgePoint workspaces then the <code>WORKSPACE</code> variable must be modified
between <code>xtuml2masl</code> invocations.</p>
</div>
<div class="paragraph">
<p>To invoke the MASL export tool, the following syntax is used</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>xtuml2masl -i &lt;eclipse project path&gt; -d &lt;package name&gt; [-o &lt;output directory&gt; ]
  or
xtuml2masl -i &lt;eclispe project path&gt; -p &lt;package name&gt; [-o &lt;output directory&gt; ]</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the <code>xtuml2masl</code> <a href="../xtuml2masl/xtuml2masl.html">reference page in BridgePoint Help</a>
for complete details. Note, if the <code>-o</code> parameter is omitted, the current directory is used
by default.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_masl_editor_extensions">6.4. MASL Editor Extensions</h3>
<div class="paragraph">
<p>Once a MASL model has been imported as an xtUML project, BridgePoint extensions for MASL
are accessed through the xtUML Modeling perspective. These extensions to the perspective
enable MASL-aware code editing and MASL export.</p>
</div>
<div class="paragraph">
<p>To best support MASL, the extensions to BridgePoint xtUML include a full featured code
editor with MASL syntax highlighting and content assistance.</p>
</div>
<div class="paragraph">
<p>The editor will appear when a model element containing MASL is <strong>&lt;dbl-click&gt;</strong> or
when using <strong>&lt;RMB&gt; &gt; Open With &gt; MASL Editor</strong>.</p>
</div>
<div class="sect3">
<h4 id="_inter_project_references_and_masl">6.4.1. Inter-Project References and MASL</h4>
<div class="paragraph">
<p>The MASL-xtUML idiom uses Inter-Project References (IPRs) to provide system-wide scope to
some model elements. IPRs are a mechanism for xtUML model elements defined in one xtUML
project to be used in another xtUML project. For the access to be allowed the referring
project must have IPRs enabled.</p>
</div>
<div class="paragraph">
<p>To check if IPRs are enabled for a particular xtUML project, select that project in the
Model Explorer View and then select <strong>&lt;RMB&gt; &gt; Project Preferences</strong>. This will open a
popup window (Figure 11).  Selecting <code>Inter-project References</code> will show the setting
"Allow inter-project model references". The use of IPRs is enabled if the checkbox is
marked.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="images/image01.png" alt="xtUML Project Preferences" width="50%">
</div>
<div class="title">Figure 11. Project Preferences</div>
</div>
<div class="paragraph">
<p>For the models based on the MASL-xtUML idiom, all xtUML projects containing a MASL
Domain component must have this checkbox <strong>unchecked</strong>.</p>
</div>
<div class="paragraph">
<p>Those xtUML projects containing a Deployment must have this checkbox <strong>checked</strong>.
The tool provides a user-assistance feature for these projects that contain Deployments.
It will prompt the user and automatically turn on IPRs for the project when performing
<code>Import terminators from component&#8230;&#8203;</code> on a Deployment with IPRs turned off.</p>
</div>
<hr>
<div class="paragraph">
<p>This work is licensed under the Creative Commons CC0 License</p>
</div>
<hr>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
</div>
</div>
</body>
</html>